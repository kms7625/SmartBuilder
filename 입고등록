

폼을 열면 다음 문단을 실행한다.
{
        DB는 데이터베이스("SHTECH_DB_PDA")를 참조한다
        사원코드는 전역정보의 "사원코드"이다
        전역정보의 "지정폼"은 5이다
        거래처그룹의 화면감춤을 설정한다
        창고그룹의 화면감춤을 설정한다
        사원명은 전역정보의 "사원명"이다
       
}

홈버튼을 누르면 다음 문단을 실행한다
{
        "화면을 종료하시겠습니까?"를 화면에 표시한다('예아니오','질문',"홈화면","홈화면예처리","홈화면아니오처리")
}
문단 홈화면예처리
{
        DB처리문("발주임시삭제")을 실행한다
        폼을 종료한다
}
문단 홈화면아니오처리
{
        문단의 실행을 취소한다
}
문단 초기화기능
{
        거래처는 ""이다
        
 }
거래처를 누르면 다음 문단을 실행한다
{
        창고그룹의 화면감춤을 설정한다
        거래처그룹의 화면감춤을 해제한다.
         DB는 데이터베이스("SHTECH_DB_PDA")를 참조한다
        질의문은 식(" SELECT CUST_CODE, CUST_NAME FROM BE_CUST_INFO")을 참조한다
        명세서배열값은 ""이다
        DB의 질의실행(질의문, 명세서배열값)을 실행한다
        거래처검색창은 명세서배열값을 참조한다
}
조회를 누르면 다음 문단을 실행한다
{
        발주임시검색창을 실행한다
        //발주검색창을 실행한다
}      
거래처검색창을 누르면 다음 문단을 실행한다
{
        선택행은 거래처검색창의 선택행을 참조한다
        거래처는 거래처검색창(선택행, "CUST_NAME")을 참조한다
        거래처코드는 거래처검색창(선택행, "CUST_CODE")을 참조한다
        발주조회를 실행한다
        //발주임시조회를 실행한다
       거래처그룹의 화면감춤을 설정한다
}    
거래처닫기를 누르면 다음 문단을 실행한다
{
        거래처그룹의 화면감춤을 설정한다
}
창고입력란을 누르면 다음 문단을 실행한다
{
        거래처그룹의 화면감춤을 설정한다
        창고그룹의 화면감춤을 해제한다
        DB는 데이터베이스("SHTECH_DB_PDA")를 참조한다
        질의문은 식(" SELECT STOR_NAME, STOR_CODE FROM BE_STOR_INFO")을 참조한다
        명세서배열값은 ""이다
        DB의 질의실행(질의문, 명세서배열값)을 실행한다
        창고검색창은 명세서배열값을 참조한다
}
창고검색창을 누르면 다음 문단을 실행한다
{
        선택행은 창고검색창의 선택행을 참조한다
        창고입력란은 창고검색창(선택행, "STOR_NAME")을 참조한다
        창고코드는 창고검색창(선택행, "STOR_CODE")을 참조한다
        창고그룹의 화면감춤을 설정한다       
}
창고닫기를 누르면 다음 문단을 실행한다
{
        창고그룹의 화면감춤을 설정한다
}
날짜입력란의 값을 변경하면 다음 문단을 실행한다
{
       //전역정보("발주날짜")는 날짜입력란을 참조한다.
       발주조회를 실행한다
}
문단 발주조회
{
        //DB처리문("발주불러오기")를 실행한다

        DB처리문("발주프로시저불러오기")를 실행한다
        발주검색창은 조회결과를 참조한다

 
}
문단 발주임시조회
{
        DB처리문("임시발주불러오기")를 실행한다
        //DB는 데이터베이스("SHTECH_DB_PDA")를 참조한다
        //질의문1은 식("select ORDR_NUMB, ATSK_CODE, ITEM_QNTY from PDA_ORDR_IPGO ")을 참조한다
        //질의문2은 식(" where CUST_CODE = '"+거래처코드+"' and IN_USER ='"+사원코드+"' ")을 참조한다.
        //질의문은 식(질의문1 + 질의문2)을 참조한다
//SP_PDA_ORDR_IPGO_TEST
        

        결과배열값은 ""이다
        DB의 질의실행(질의문, 결과배열값)을 실행한다


        발주임시검색창은 조회결과를 참조한다

}
발주검색창을 누르면 다음 문단을 실행한다
{
        선택행은 발주검색창의 선택행을 참조한다
        발주번호란은 발주검색창(선택행, 1)을 참조한다
        품명은 발주검색창(선택행, "ATSK_CODE")을 참조한다
        아이템수량은 발주검색창(선택행, "ITEM_QNTY")을 참조한다
        저장삭제확인에 "I"를 대입한다
        DB처리문("발주임시저장")을 실행한다
        발주임시조회를 실행한다

}

발주임시검색창을 누르면 다음 문단을 실행한다
{
        선택행은 발주임시검색창의 선택행을 참조한다
        발주번호란2은 발주임시검색창(선택행, 1)을 참조한다
        품명2은 발주임시검색창(선택행, "ATSK_CODE")을 참조한다
        아이템수량2은 발주임시검색창(선택행, "ITEM_QNTY")을 참조한다
        저장삭제확인에 "D"를 대입한다
}

삭제를 누르면 다음 문단을 실행한다
{
        저장삭제확인이 ""이면 다음 문단을 실행한다
        {
                "상단 발주리스트를 선택하세요"를 화면에 표시한다
                문단의 실행을 취소한다
        }
        DB처리문("발주임시삭제")을 실행한다
        DB처리문("임시발주불러오기")을 실행한다
        발주임시검색창은 조회결과를 참조한다
        저장삭제확인에 ""를 대입한다
}
취소버튼을 누르면 다음 문단을 실행한다.
{
        거래처는 ""이다
        거래처코드는 ""이다
        DB처리문("발주임시삭제")을 실행한다
        //DB처리문("발주불러오기")를 실행한다

        // 발주불러오기 SQL문 직접입력
        DB는 데이터베이스("SHTECH_DB_PDA")를 참조한다
        //yyyymm은 식(문자치환(왼쪽(날짜입력란, 7), "-", ""))을 참조한다
    질의문1은 식("SELECT D.ATSK_CODE AS ATSK_CODE, ")을 참조한다
    질의문2는 식("       SUM(ISNULL(A.ITEM_QNTY,0) - ISNULL(C.IPGO_QNTY,0)) AS ITEM_QNTY ")을 참조한다
    질의문3는 식(" FROM MT_ORDR_DETL AS A ")을 참조한다
    질의문4는 식(" JOIN MT_ORDR_MAST AS B ON A.ORDR_NUMB = B.ORDR_NUMB ")을 참조한다
    질의문5는 식(" LEFT JOIN (SELECT A.ORDR_NUMB, A.SQEN_NUMB, ")을 참조한다
    질의문6는 식("                 SUM(A.ITEM_QNTY * CASE WHEN M.IPGO_TYPE = '40' THEN -1 ELSE 1 END) AS IPGO_QNTY ")을 참조한다
    질의문7는 식("          FROM MT_IPGO_DETL AS A JOIN MT_IPGO_MAST AS M ON A.IPGO_NUMB = M.IPGO_NUMB ")을 참조한다
    질의문8는 식("          GROUP BY A.ORDR_NUMB, A.SQEN_NUMB) AS C ")을 참조한다
    질의문9는 식("  ON A.ORDR_NUMB = C.ORDR_NUMB AND A.SQEN_NUMB = C.SQEN_NUMB ")을 참조한다
    질의문10은 식(" JOIN BE_ITEM_INFO AS D ON A.ITEM_CODE = D.ITEM_CODE ")을 참조한다
    질의문11은 식(" WHERE CONVERT(char(6), B.ORDR_DATE,112) = '"+날짜입력란+"' ")을 참조한다
    질의문12은 식("  AND B.CUST_CODE = '"+거래처코드+"' ")을 참조한다
    질의문13은 식("  AND (ISNULL(A.ITEM_QNTY,0) - ISNULL(C.IPGO_QNTY,0)) > 0 ")을 참조한다
    질의문14은 식("  AND LEFT(D.ITEM_GUBN,1) = '2' ")을 참조한다
    질의문15은 식(" GROUP BY D.ATSK_CODE ORDER BY D.ATSK_CODE ")을 참조한다

    질의문은 식(질의문1+질의문2+질의문3+질의문4+질의문5+질의문6+질의문7+질의문8+질의문9+질의문10+질의문11+질의문12+질의문13+질의문14+질의문15)을 참조한다

    결과배열값은 ""이다
    DB의 질의실행(질의문, 결과배열값)을 실행한다
    발주검색창은 결과배열값을 참조한다
////////////////////////////////////////////////////////////////////

        //발주검색창은 조회결과를 참조한다
}
문단 전역정보보내기
{
        전역정보("거래처코드")는 거래처코드를 참조한다.
        전역정보("창고코드")는 창고코드를 참조한다.
        전역정보("입고일")는 입고일란을 참조한다.
        전역정보("입고번호")는 입고넘버를 참조한다.
        
 }
문단 입고번호불러오기
{
        //DB처리문("입고번호조회")을 실행한다.
        // 입고번호조회 sql문 직접입력
        DB는 데이터베이스("SHTECH_DB_PDA")를 참조한다
        질의문1은 식(" SELECT TOP 1 B.IPGO_NUMB AS IPGO_NUMB ")을 참조한다
        질의문2는 식(" FROM MT_IPGO_DETL AS A ")을 참조한다
        질의문3는 식(" LEFT JOIN MT_IPGO_MAST AS B ON A.IPGO_NUMB = B.IPGO_NUMB ")을 참조한다
        질의문4는 식(" WHERE B.IPGO_DATE = '"+입고일란+"' ")을 참조한다
        질의문5는 식(" AND A.IN_USER = '"+사원코드+"' ")을 참조한다
        질의문6는 식(" AND B.CUST_CODE = '"+거래처코드+"' ")을 참조한다
        질의문7는 식(" ORDER BY B.IN_DATE DESC ")을 참조한다
         질의문은 식(질의문1 + 질의문2 + 질의문3 + 질의문4 + 질의문5 + 질의문6 + 질의문7)을 참조한다
        결과배열값은 ""이다
        DB의 질의실행(질의문, 결과배열값)을 실행한다
        입고번호나와는 결과배열값을 참조한다
///////////////////////////////////////////////////////////////////////
        //입고번호나와는 조회결과를 참조한다
        입고넘버는 입고번호나와(1,1)을 참조한다.

//        DB는 데이터베이스("SHTECH_DB_PDA")를 참조한다.
//        질의문1은 식(" SELECT TOP 1 A.IPGO_NUMB FROM MT_IPGO_MAST AS A ")을 참조한다.
//        질의문2은 식(" LEFT JOIN MT_IPGO_DETL as B on A.IPGO_NUMB = B.IPGO_NUMB ")을 참조한다.
 //       질의문3은 식(" WHERE A.IPGO_DATE = '"+입고일란+"' AND A.IN_USER = '"+사용자+"' AND A.CUST_CODE = '"+거래처코드+"' ORDER BY A.IN_DATE DESC ")을 참조한다.
 //       질의문은 식(질의문1 + 질의문2 + 질의문3)을 참조한다.
  //      명세서배열값은 ""이다
   //     DB의 질의실행(질의문, 명세서배열값)을 실행한다
    //    입고번호나와는 명세서배열값을 참조한다
}
        
다음을 누르면 다음 문단을 실행한다
{
        거래처코드가 ""이면 다음 문단을 실행한다
        {
                "거래처를 선택하세요"를 화면에 표시한다
                문단의 실행을 취소한다
        }
         발주검색창이 ""이면 다음 문단을 실행한다
        {
                "발주내역을 선택하세요"를 화면에 표시한다
                문단의 실행을 취소한다
        }
        창고입력란이 ""이면 다음 문단을 실행한다
        {
                "입고창고를 선택하세요"를 화면에 표시한다
                문단의 실행을 취소한다
        }

        DB처리문("입고저장")을 실행한다
        입고번호불러오기를 실행한다.
        전역정보보내기를 실행한다.
}





















